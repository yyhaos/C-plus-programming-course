<center > 北京师范大学2018-2019学年第一学期 “C++程序设计” </center>

<center><font size=12><b>上机作业五</b></fontfont></center>



| 姓    名 |   学    号   |  日    期  |
| :------: | :----------: | :--------: |
 2018.10.16 |



## 实验目的

* **无参数构造函数的定义和使用。**
* **类的组合定义和使用。**
* **类的前向声明。**
* **析构函数种指针变量的析构。**



##  实验总结：

**请在以下总结实验中发现的问题和解决办法或心得体会。请勿黏贴过多源码。**

 

1. **问题**：new申请内存后出现内存泄露。

   **解决**：因为忘了调用delete释放内存导致，对new出来的内存增加delete即可。

 

2. **问题**：分数的化简

   **解决**：GCD(a,b)求解的是两个整数的最大公约数(可能为负的最大公约数)。

   两个正整数a,b的化简是a/GCD(a,b),b/gcd(a,b)，因为GCD(a,b)>0。

   两个整数a,b的化简应该是先当成正整数处理后，单独考察分母的符号，再处理。

   第一次的代码如下：

```c++
void Fraction::Standerdize(void)
{
    num/=GCD();
    den/=GCD();	//GCD()的值改变了
    if(den<0)	//处理分母的符号
    {
        den*=-1;
        num*=-1;
    }
}
```

​	发现6/8的化简有错误 化简成了3/8，检查发现GCD()的值改变了，所以更改如下：

```c++
void Fraction::Standerdize(void)
{
    int gcd=GCD();
    num/=gcd;
    den/=gcd;
    if(den<0)
    {
        den*=-1;
        num*=-1;
    }
}
```

​	就可以了

3. **问题**：分数的加减运算
   **解决**:  先统一分母后再计算分子的加/减，然后调用标准化函数。
   
4. **问题**：分数的乘除运算
   **解决**:  分别计算新分子、新分母，然后调用标准化函数。

5. **心得**: 有参数构造函数里面有缺省值后就可以不用再定义无参数构造函数了。

6. **问题**: 第二个作业种，如果Person的含参数构造函数没有用列表的方法，而踩用下面的方法：
```c++
Person::Person(char * n,int y,int m,int d,char g)
{
    name=new char[strlen(n)+1];
    strcpy(name,n);
    birthday=Date(y,m,d);
    gender=g;
    cout<<"Person类含参量构造函数调用完毕"<<endl;
}
```
那么Date类就必须要有一个无参量构造函数或者带缺省值的有参量构造函数。
```c++
Date::Date(){cout<<"Date类无参数构造函数调用完毕"<<endl;};//必须有
Date::Date(int y,int m,int d)
{
    year=y,month=m,day=d;
    cout<<"Date类含参数构造函数调用完毕"<<endl;
}
```
7. **心得**: 类组合的构造函数调用
   	构造函数调用顺序：
	先调用内嵌对象的构造函数（按内嵌时的声明顺序，先声明者先构造）。
	然后调用本类的构造函数。

	析构函数的调用顺序相反。

	初始化列表中未出现的内嵌对象，用默认构造函数（即无形参的）初始化。
	系统自动生成的隐含的默认构造函数中，内嵌对象全部用默认构造函数初始化
